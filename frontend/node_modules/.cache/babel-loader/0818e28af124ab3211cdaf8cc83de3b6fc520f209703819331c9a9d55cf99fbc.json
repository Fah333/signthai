{"ast":null,"code":"var _jsxFileName = \"C:\\\\Project_signthai\\\\frontend\\\\src\\\\pages\\\\Testexercise.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Testexercise() {\n  _s();\n  const [user, setUser] = useState({\n    userId: null,\n    username: \"Guest\",\n    token: null\n  });\n  const [score, setScore] = useState(0);\n  const [message, setMessage] = useState(\"\");\n  useEffect(() => {\n    // ‡πÇ‡∏´‡∏•‡∏î user ‡∏à‡∏≤‡∏Å localStorage ‡∏´‡∏£‡∏∑‡∏≠ Guest Mode\n    const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n    if (storedUser && storedUser.userId && storedUser.token) {\n      setUser(storedUser);\n      console.log(\"üë§ User loaded:\", storedUser);\n    } else {\n      const guestUser = {\n        userId: 9999,\n        username: \"Guest\",\n        token: \"guest-token\"\n      };\n      setUser(guestUser);\n      console.warn(\"‚ö† ‡πÑ‡∏°‡πà‡∏°‡∏µ user_id ‡πÉ‡∏ô localStorage ‚Äî ‡πÉ‡∏ä‡πâ Guest Mode\");\n    }\n  }, []);\n  const handleNext = async () => {\n    // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô\n    const newScore = score + 10;\n    setScore(newScore);\n    if (user.userId === 9999) {\n      // Guest Mode ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å localStorage ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô\n      const guestScores = JSON.parse(localStorage.getItem(\"guestScores\")) || [];\n      guestScores.push({\n        score: newScore,\n        date: new Date().toISOString()\n      });\n      localStorage.setItem(\"guestScores\", JSON.stringify(guestScores));\n      setMessage(\"‚ö† Guest Mode: ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏Ñ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏≠‡∏á\");\n      console.log(\"Guest score saved locally:\", guestScores);\n      return;\n    }\n\n    // User ‡∏õ‡∏Å‡∏ï‡∏¥ ‚Üí POST ‡πÑ‡∏õ backend\n    try {\n      const response = await fetch(\"http://localhost:3000/scores\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${user.token}`\n        },\n        body: JSON.stringify({\n          userId: user.userId,\n          score: newScore\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.message || \"Error sending score\");\n      }\n      setMessage(`‚úÖ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢: ${newScore}`);\n      console.log(\"POST /scores response:\", data);\n    } catch (err) {\n      console.error(\"Error sending score:\", err);\n      setMessage(`‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏î‡πâ: ${err.message}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"\\u0E2A\\u0E27\\u0E31\\u0E2A\\u0E14\\u0E35 \", user.username]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19: \", score]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleNext,\n      children: \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(Testexercise, \"K17WJprcU9ARdm9vN0WyO1Qd6ys=\");\n_c = Testexercise;\nexport default Testexercise;\nvar _c;\n$RefreshReg$(_c, \"Testexercise\");","map":{"version":3,"names":["useState","useEffect","jsxDEV","_jsxDEV","Testexercise","_s","user","setUser","userId","username","token","score","setScore","message","setMessage","storedUser","JSON","parse","localStorage","getItem","console","log","guestUser","warn","handleNext","newScore","guestScores","push","date","Date","toISOString","setItem","stringify","response","fetch","method","headers","body","data","json","ok","Error","err","error","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Project_signthai/frontend/src/pages/Testexercise.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nfunction Testexercise() {\r\n  const [user, setUser] = useState({ userId: null, username: \"Guest\", token: null });\r\n  const [score, setScore] = useState(0);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    // ‡πÇ‡∏´‡∏•‡∏î user ‡∏à‡∏≤‡∏Å localStorage ‡∏´‡∏£‡∏∑‡∏≠ Guest Mode\r\n    const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (storedUser && storedUser.userId && storedUser.token) {\r\n      setUser(storedUser);\r\n      console.log(\"üë§ User loaded:\", storedUser);\r\n    } else {\r\n      const guestUser = {\r\n        userId: 9999,\r\n        username: \"Guest\",\r\n        token: \"guest-token\",\r\n      };\r\n      setUser(guestUser);\r\n      console.warn(\"‚ö† ‡πÑ‡∏°‡πà‡∏°‡∏µ user_id ‡πÉ‡∏ô localStorage ‚Äî ‡πÉ‡∏ä‡πâ Guest Mode\");\r\n    }\r\n  }, []);\r\n\r\n  const handleNext = async () => {\r\n    // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô\r\n    const newScore = score + 10;\r\n    setScore(newScore);\r\n\r\n    if (user.userId === 9999) {\r\n      // Guest Mode ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å localStorage ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô\r\n      const guestScores = JSON.parse(localStorage.getItem(\"guestScores\")) || [];\r\n      guestScores.push({ score: newScore, date: new Date().toISOString() });\r\n      localStorage.setItem(\"guestScores\", JSON.stringify(guestScores));\r\n      setMessage(\"‚ö† Guest Mode: ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏Ñ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏≠‡∏á\");\r\n      console.log(\"Guest score saved locally:\", guestScores);\r\n      return;\r\n    }\r\n\r\n    // User ‡∏õ‡∏Å‡∏ï‡∏¥ ‚Üí POST ‡πÑ‡∏õ backend\r\n    try {\r\n      const response = await fetch(\"http://localhost:3000/scores\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"Authorization\": `Bearer ${user.token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          userId: user.userId,\r\n          score: newScore,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (!response.ok) {\r\n        throw new Error(data.message || \"Error sending score\");\r\n      }\r\n\r\n      setMessage(`‚úÖ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢: ${newScore}`);\r\n      console.log(\"POST /scores response:\", data);\r\n    } catch (err) {\r\n      console.error(\"Error sending score:\", err);\r\n      setMessage(`‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏î‡πâ: ${err.message}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ {user.username}</h2>\r\n      <p>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: {score}</p>\r\n      <button onClick={handleNext}>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</button>\r\n      {message && <p>{message}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Testexercise;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}